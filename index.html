<?php
// Coded by @PikaApis 
// Join our telegram channel for more Apis

header('Content-Type: application/json');

if (isset($_GET['prompt'])) {
    $content = $_GET['prompt'];

    $data = json_encode([
        'messages' => [
            [
                'role' => 'user',
                'content' => $content,
                'id' => '58rbWde'
            ]
        ],
        'id' => 'QAOLIQi',
        'previewToken' => null,
        'userId' => null,
        'codeModelMode' => true,
        'agentMode' => new stdClass(),
        'trendingAgentMode' => new stdClass(),
        'isMicMode' => false,
        'userSystemPrompt' => null,
        'maxTokens' => 1024,
        'playgroundTopP' => 0.9,
        'playgroundTemperature' => 0.5,
        'isChromeExt' => false,
        'githubToken' => null,
        'clickedAnswer2' => false,
        'clickedAnswer3' => false,
        'clickedForceWebSearch' => false,
        'visitFromDelta' => false,
        'mobileClient' => false,
        'userSelectedModel' => 'gemini-pro'
    ]);

    $options = [
        'http' => [
            'header' => [
                "User-Agent: Mozilla/5.0 (Linux; Android 13; 220333QAG Build/TKQ1.221114.001) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.6668.100 Mobile Safari/537.36",
                "Content-Type: application/json",
                "sec-ch-ua-platform: \"Android\"",
                "sec-ch-ua: \"Android WebView\";v=\"129\", \"Not=A?Brand\";v=\"8\", \"Chromium\";v=\"129\"",
                "sec-ch-ua-mobile: ?1",
                "origin: https://www.blackbox.ai",
                "x-requested-with: mark.via.gp",
                "sec-fetch-site: same-origin",
                "sec-fetch-mode: cors",
                "sec-fetch-dest: empty",
                "referer: https://www.blackbox.ai/?model=gemini-pro",
                "accept-language: en-GB,en-US;q=0.9,en;q=0.8",
                "priority: u=1, i"
            ],
            'method' => 'POST',
            'content' => $data,
            'ignore_errors' => true
        ]
    ];

    $context = stream_context_create($options);

    $response = file_get_contents('https://www.blackbox.ai/api/chat', false, $context);

    if ($response === FALSE) {
        echo json_encode(['error' => 'Request failed', 'contact' => '@PikaApis']);
    } else {
        echo json_encode(['status' => 'Success', 'owner' => '@PikaApis', 'response' => $response]);
    }
} else {
    echo json_encode(['error' => 'No prompt provided', 'owner' => '@PikaApis']);
}
?>